#summary 処理時間の比較．

= 概要 =

Darts と Darts clone を用いた辞書構築，
キー検索，前文検索の実行時間を計測しました．

サイズによる比較では Darts clone の方が優秀なものの，
構築時間や検索時間については，状況により Darts の方が優秀です．
少なくとも，大量の短いキーを含む辞書を用いる状況では，
Darts の方が高速に動作することが確認されています．
また，commonPrefixSearch() や traverse() を多用する状況では
Darts の方が高速です．

※ まだ公開していませんが，0.32f の実験結果を載せてあります．

= 実験設定 =

Darts と Darts clone を用いて辞書を構築し，
辞書順およびランダム順に登録キーを検索するのに要する時間を計測しました．
全文検索については，Wikipedia をダンプした
XML の先頭 100 MB を検索文書として使用しました．

各実験における試行回数は，5 回以上かつ処理時間の合計が
5 秒以上になるまでとしました．

== 実験環境 ==

OS には Windows，コンパイラには MinGW gcc 3.4.5 を使用しました．

|| *環境 ID* || *PC 型番* || *CPU 型番* || *CPU 周波数* || *補足* ||
||S101||ASUS Eee PC S101||Atom N270||1.60GHz||Windows XP, High Performance Mode||
||T3400||Dell Precision T3400||Core 2 Quad Q9550||2.83GHz||Windows Vista||

環境やコンパイラによる影響が大きいので，気になる方には，
自身の環境にてテストしてみることをお勧めします．

== コーパス ==

=== 辞書登録用コーパス ===

|| *語彙 ID* || *出典* || *内容* || *キー数* || *サイズ* || *関連 URL* || *補足* ||
||JA1||ipadic-2.6.3||見出し語||159,442||2,892,008||http://chasen.aist-nara.ac.jp/chasen/distribution.html.ja||漢字かな混じり||
||JA2||Wikipedia 日||形態素||865,489||18,439,874||http://download.wikimedia.org/||jawiki-20081127-all-titles-in-ns0||
||JA3||Google n-gram 日||見出し||2,565,427||50,784,220||http://googlejapan.blogspot.com/2007/11/n-gram.html||Google n-gram の unigram||
||EN1||WordNet-3.0||英語||147,306||1,839,597||http://wordnet.princeton.edu/||英単語||
||EN2||Wikipedia 英||見出し||5,716,820||111,542,495||http://download.wikimedia.org/||enwiki-20081008-all-titles-in-ns0||
||EN3||Google n-gram 英||形態素||13,588,391||125,937,836||http://googleresearch.blogspot.com/2006/08/all-our-n-gram-are-belong-to-you.html||Google n-gram の unigram||
||DIG||郵便番号辞書||数字||118,559||948,472||http://www.post.japanpost.jp/zipcode/download.html||2008年6月30日更新版||

Google n-gram 以外は誰でもダウンロード可能です．

=== 全文検索用コーパス ===

|| *出典* || *内容* || *サイズ* || *関連 URL* || *補足* ||
||Wikipedia 日||XML||100,000,000||http://download.wikimedia.org/||jawiki-20081127-pages-articles.xml の先頭 100MB||
||Wikipedia 英||XML||100,000,000||http://download.wikimedia.org/||enwiki-20081008-pages-articles.xml の先頭 100MB||

日本語の辞書に対しては日本語版 Wikipedia，
英語の辞書に対しては英語版 Wikipedia を使用しました．

= 実験結果 =

平均の実行時間を秒単位で示しています．

実応用ではキーの出現頻度が偏ることが多いので，
全文検索の速度を重視すべきかもしれません．

== 構築時間 ==

|| *環境 ID* || *バージョン* || *JA1* || *JA2* || *JA3* || *EN1* || *EN2* || *EN3* || *DIG* ||
||S101||Darts 0.32||1.341||12.119||25.006||1.031||68.534||55.744||0.281||
||-||Darts clone 0.32e||0.725||4.916||14.738||0.564||35.591||78.222||0.943||
||-||Darts clone 0.32f||0.561||6.428||17.287||0.583||31.375||24.787||0.241||
||T3400||Darts 0.32||0.409||4.100||8.290||0.346||23.228||18.392||0.080||
||-||Darts clone 0.32e||0.220||1.435||4.415||0.157||10.829||23.628||0.252||
||-||Darts clone 0.32f||0.174||1.872||4.920||0.169||9.238||7.685||0.068||

日英の単語を登録するような状況では，
Darts clone の方が高速に辞書を構築できています．
ただし，短いキーが多い英語版 Google n-gram と郵便番号辞書については，
Darts の方が高速に辞書を構築できています．

== キー検索時間 ==

=== 辞書順キー検索時間 ===

|| *環境 ID* || *バージョン* || *JA1* || *JA2* || *JA3* || *EN1* || *EN2* || *EN3* || *DIG* ||
||S101||Darts 0.32||0.039||0.237||0.660||0.028||1.428||1.956||0.013||
||-||Darts clone 0.32e||0.057||0.358||1.025||0.040||2.381||3.222||0.021||
||-||Darts clone 0.32f||0.040||0.279||0.834||0.030||1.716||2.122||0.016||
||T3400||Darts 0.32||0.017||0.089||0.232||0.016||0.532||0.729||0.004||
||-||Darts clone 0.32e||0.016||0.105||0.277||0.012||0.773||0.944||0.005||
||-||Darts clone 0.32f||0.016||0.092||0.243||0.015||0.552||0.718||0.005||

T3400 上で日英の基本語彙を登録した状況では
Darts clone の方が高速になっているものの，
その他の状況では Darts の方が高速に検索できています．

=== ランダム順キー検索時間 ===

|| *環境 ID* || *バージョン* || *JA1* || *JA2* || *JA3* || *EN1* || *EN2* || *EN3* || *DIG* ||
||S101||Darts 0.32||0.168||1.306||4.331||0.126||9.834||17.563||0.066||
||-||Darts clone 0.32e||0.160||1.153||4.172||0.120||9.422||18.784||0.078||
||-||Darts clone 0.32f||0.169||1.222||4.131||0.114||9.316||16.628||0.060||
||T3400||Darts 0.32||0.065||0.556||1.966||0.046||4.689||8.028||0.008||
||-||Darts clone 0.32e||0.030||0.460||1.688||0.021||4.240||8.006||0.010||
||-||Darts clone 0.32f||0.040||0.489||1.622||0.025||4.069||6.998||0.008||

英語版 Google n-gram と郵便番号辞書を用いた場合を除いて，
Darts clone の方が高速に検索できています．

== 全文検索時間 ==

=== commonPrefixSearch() による全文検索時間 ===

|| *環境 ID* || *バージョン* || *JA1* || *JA2* || *JA3* || *EN1* || *EN2* || *EN3* || *DIG* ||
||S101||Darts 0.32||11.872||17.312||19.962||16.134||6.797||39.606||||
||-||Darts clone 0.32e||6.266||16.359||24.497||20.213||9.403||64.016||||
||-||Darts clone 0.32f||8.319||11.456||14.825||12.672||6.141||35.675||||
||T3400||Darts 0.32||3.011||4.477||5.064||3.691||2.159||8.683||||
||-||Darts clone 0.32e||3.295||4.649||6.047||5.276||2.795||13.797||||
||-||Darts clone 0.32f||2.399||3.313||3.816||3.292||1.766||7.416||||

Darts の方が高速ですが，状況によっては差がかなり小さくなっています．

=== traverse() による全文検索時間 ===

|| *環境 ID* || *バージョン* || *JA1* || *JA2* || *JA3* || *EN1* || *EN2* || *EN3* || *DIG* ||
||S101||Darts 0.32||15.734||21.616||25.128||20.425||8.019||45.794||||
||-||Darts clone 0.32e||14.963||30.466||41.525||35.981||16.634||85.309||||
||-||Darts clone 0.32f||12.078||15.578||19.547||16.897||7.612||41.525||||
||T3400||Darts 0.32||4.031||5.900||6.552||4.942||2.265||10.212||||
||-||Darts clone 0.32e||7.713||9.276||11.990||10.187||5.282||23.122||||
||-||Darts clone 0.32f||3.594||4.652||5.136||4.402||2.106||8.552||||

Darts の方が明らかに高速です．